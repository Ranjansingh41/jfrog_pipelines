resources:      
#   - name: file
#     type: file
#     fileLocation: s3://strangers-beta/profiles
#     fileName: 1.png
#     configuration:
#       integrationName: ankul_aws
#     initialVersion:
#       fileDtTm: "2019-01-06" 
      
#   - name: sample_node
#     type: gitRepo
#     repoPath: ankul-shippable/sample_node
#     configuration:
#       integrationName: ankul_github
#     initialVersion:
#       sha: master
      
  - name: internal_webhook
    type: webhook
    configuration:
      integrationName: int_webhook
    initialVersion:
      payload: "key=val key2=val2"     
           

pipelines:
  - name: ankul_pipeline
    steps:
      - name: test_step
        type: bash
        configuration:
          nodePool: ankul_u16_nodes
        execution:
          onExecute:
            - printenv
            - sudo apt-get install tree
            - tree $res_internal_webhook_resourcePath
            - cat $res_internal_webhook_resourcePath/internal_webhook.env
            - echo "KEY1=VALUE1" >> $res_internal_webhook_resourcePath/internal_webhook.env
            - cat $res_internal_webhook_resourcePath/internal_webhook.env
        outputResources:
          - internal_webhook
          
  - name: ankul_pipeline_2
    steps:
      - name: test_step_2
        type: bash
        configuration:
          nodePool: ankul_u16_nodes
        requires:
          resources:
            - internal_webhook
        execution:
          onExecute:
            - printenv
